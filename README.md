# Java SpringBoot приложение, выполняющее sql запрос по расписанию

В реализации данного приложения использовалось:
* Фреймворк (SpringBoot)
* База данных (PostgreSQL)
* Взаимодействие с базой данных (jdbcTemplate)
* Логирование (slf4j)
* Планировка выполнения метода с определённым интервалом (Scheduled)

# Использование приложения:

1. Для того, чтобы сформировать SQL запрос так же требуется настроить следующие переменные:

   * `queryDelSqlParam: Значение` - Значение по которому будет производится удалеине строк из таблицы.

   * `limitDelSqlParam: число` - Это аргумент устанавливает предел на количество удаляемых строк из таблицы в БД за одну итерацию выполнения SQL-команды. (Это делается для того, чтобы во время работы не упала БД)
 
   * `tableDelSqlParam: Название таблицы` - Этот аргумент устанавливает название таблицы, для которой вы хотите применить SQL запрос
   
   * `primalKeyColumnDelSqlParam: Условие` - В этом условии должно быть название Primary Key столбца
   
   * `secondColumnDelSqlParam: условие` - В этом условии должно быть название столбца в котором вы ищете нужный элемент исходя из аргумента `queryDelSqlParam`
   
   * `arithmeticSignDelSqlParam: Арифметический знак` - В этом условии ставится арифметический знак, определяющий критерий поиска нужной строки.
   
   **Пример:**
   
   DELETE FROM `tableDelSqlParam` WHERE `primalKeyColumnDelSqlParam` IN (SELECT `primalKeyColumnDelSqlParam` FROM `tableDelSqlParam` WHERE `secondColumnDelSqlParam` `arithmeticSignDelSqlParam` ? LIMIT ?)
   
   Установим значения переменным: 
   
   * queryDelSqlParam: 20
   
   * limitDelSqlParam: 1
   
   * tableDelSqlParam: testTable
   
   * primalKeyColumnDelSqlParam: id
   
   * secondColumnDelSqlParam: age
    
   * arithmeticSignDelSqlParam: =
   
   Получаем:
   
   DELETE FROM `testTable` WHERE `id` IN (SELECT `id` FROM `testTable` WHERE `age` `=` 20 LIMIT 1)
      
      
      
    
3. Для того, чтобы изменить время ожидания для выполнения sql запроса Delete, следует изменить любую из двух следующих переменных:

    * `firstFixedRate: "0 0 * * * *"` - Каждый час. 
    * `secondFixedRate: "0 0 0 * * *"` - Каждый раз в 12 ночи.
    
    Значения для данных переменных устанавливаются в соответствии с `cron`
    Более подробная информация здесь: **https://habr.com/ru/articles/580062/**
    
    Примеры:
    
    `firstFixedRate: "0 15 10 * * *"` - запускается в 10:15 каждый день. (каждую 0-ю секунду, 15-ю минуту, 10-й час, каждый день). *указывает, что выражение cron
    соответствует всем значениям поля. Например, *в поле минут означает каждую минуту.
    
    `firstFixedRate: "0 0 * * * *"` - Каждый час.
    
    `firstFixedRate: "0 * * * * *"` - Каждый минуту.
    
    `firstFixedRate: "* * * * * *"` - Каждый каждую секунду.
    
    т.е: `( * * * * * )`
    
    Первая `*` - секунды (0 - 59)
    
    Вторая `*` - минуты (0 - 59)
    
    Третья `*` - Часы (0 - 23)
    
    Четвёртая `*` - Дни (1 - 31)
    
    Пятая `*` - Дни недели (0 - 7)
    
 
 
    
    После того, как всё настроено - запустите приложение.
    
# Запуск Spring-Boot приложения:
 
 Запустить приложение можно несколькими способами:
 
   1. Для запуска приложения вставьте команду в терминал: `mvnw spring-boot:run`
   2. Если вы работаете в IDEA, то запустить приложение можно комбинацией клавиш: `shift + f10`
   3. Независимо от способа инициализации проекта, вы всегда можете запустить приложение из командной строки командой java -jar: `java -jar demo.jar`   

# Поиск логов работы приложения:

Для логирования приложения использовалось **`slf4j`** (Выше об этом было сказано). Все логи приложения вы сможете найти в корневой директории проекта, в папке `logs`. В этой папке содержатся файлы хранящие в себе логи работы приложения. Так же информация содержится в терминале вашей IDE. 
