# Java SpringBoot приложение, выполняющее sql запрос по расписанию

В реализации данного приложения использовалось:
* Фреймворк (SpringBoot)
* База данных (PostgreSQL)
* Взаимодействие с базой данных (jdbcTemplate)
* Логирование (slf4j)
* Планировка выполнения метода с определённым интервалом (Scheduled)

# Использование приложения:

1. Для того, чтобы поменять критерий удаления информации из Базы данных, надо задать значение следующей переменной в yaml файле:

    * `queryDelSqlParam: "Значение" (кавычки не требуются)`

2. Для того, чтобы указать максимальное количество удаляемых строк из таблицы в БД за одну итерацию выполнения SQL-команды, следует установить критерий следующей переменной:

    * `LimitDelSqlParam: "число" (кавычки не требуются)`
    
      Это делается для того, чтобы в процессе работы не упала БД
    
3. Для того, чтобы изменить время ожидания для выполнения sql запроса Delete, следует изменить любую из двух следующих переменных:

    * `FixedRateEveryHour: "0 0 * * * *" - Каждый час.`
    * `EveryTwelveHoursOfTheNightRate: "0 0 0 * * *" - Каждый раз в 12 ночи.`
    
    Значения для данных переменных устанавливаются в соответствии с `cron`
    Более подробная информация здесь: **https://habr.com/ru/articles/580062/**
    
    Примеры: 
    FixedRateEveryHour: "0 0 * * * *" - Каждый час.
    
    
    т.е: `( * * * * * )`
    
    Первая `*` - секунды (0 - 59)
    
    Вторая `*` - минуты (0 - 59)
    
    Третья `*` - Часы (0 - 23)
    
    Четвёртая `*` - Дни (1 - 31)
    
    Пятая `*` - Дни недели (0 - 7)
    
 
    
    После того, как всё настроено - запустите приложение.
    
# Запуск Spring-Boot приложения:
 
 Запустить приложение можно несколькими способами:
 
   1. Для запуска приложения вставьте команду в терминал: `mvnw spring-boot:run`
   2. Если вы работаете в IDEA, то запустить приложение можно комбинацией клавиш: `shift + f10`
   
   У вас могут возникнуть несколько ошибок при выполнении данной команды, рассмотрим все:
   
   `Ошибка №1` 
   ```
   Команда mvnw не найдена, однако существует в текущем расположении. По умолчанию оболочка Windows PowerShell не загружает команды из текущего расположения.
   eсли вы уверены в надежности команды, введите ".\mvnw". Для получения дополнительных сведений вызовите справку с помощью 
   команды "get-heabout_Command_Precedence".
   ```
   * Это сообщение об ошибке говорит о том, что команда mvnw не может быть выполнена, потому что по умолчанию оболочка PowerShell в Windows не загружает команды 
   из текущего каталога. Однако, как указано в сообщении, вы можете запустить команду, используя "./mvnw" или ".\mvnw" 
   (в зависимости от того, какую оболочку вы используете).
     
   `Ошибка №2 (В некоторых случаях возникает после первой ошибки)`
   ```
   Error: JAVA_HOME not found in your environment.
   Please set the JAVA_HOME variable in your environment to match the
   location of your Java installation.
   ```
   * Эта ошибка указывает на то, что переменная `JAVA_HOME` не была установлена в вашей среде. `JAVA_HOME` - это переменная среды, 
   которая указывает на расположение вашей `JDK` в системе.
   Чтобы решить эту проблему, вы должны установить переменную `JAVA_HOME` и убедиться, что она указывает на правильное местоположение вашей `JDK`. 
   Вот как это сделать:
   
      1. На Windows: `Панель управления > Система > Дополнительные параметры системы > Переменные среды`.
      
         На Mac: `Откройте Терминал и выполните команду nano ~/.bash_profile.`
         
      2. Создайте переменную со следующим названием: `JAVA_HOME` (**ВАЖНО** учитывать регистр, он должен быть большой).
      
      3. Сохраните в эту переменную `полный путь до вашей JDK`, которую вы используете. `(В проекте используется JDK 20 версии)`
      
         * Чтобы посмотреть какая `JDK` используется в проекте,  в среде разработке `IDEA`, выполните следующие пункты: `File > Project Structure`
         
      4. После этого вы должны перезапустить ваш терминал или командную строку, чтобы изменения вступили в силу. 
         После перезапуска вы можете снова выполнить команду и убедиться, что она успешно запускается. (Можно перезапустить среду разработки, если вдруг команда не заработала)
         
# Поиск логов работы приложения:

Для логирования приложения использовалось **`slf4j`** (Выше об этом было сказано). В приложении используется конфигурация по умолчанию для ведения журнала, следовательно регистраторы настроены на использование консольного вывода.



   
      



GQRnVEk8G3gNPQ4uurwfY/206orIUm+bN90ctyYhND8IDN7JLcuJwA==
